<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <title>
    
      Docker: Install, Build an Image and Publish to DockerHub &middot; Akash Nair
    
  </title>

  


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />
  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.ico" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" />

  <!-- Additional head bits without overriding original head -->
</head>


  <body class="post">

    <div id="sidebar">
  <header>
    <div class="site-title">
      <a href="/">
        
          <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
        
        Akash Nair
      </a>
    </div>
    <p class="lead">I am a DevOps Engineer and an automation extremist. I design, build and implement architectures on the cloud</p>
  </header>
  <nav id="sidebar-nav-links">
  
  

  

  <div id="profile-container">
     <center><image height=190 width=190 id="profileImage" src="/assets/images/avatar.png" /></center>
  </div>

  <!-- Icons downloaded from https://iconmonstr.com/ -->
  <!-- Home link sidebar-->
  <a id="home-link"
       title="Home" aria-label="Home"
       href="/">
       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.5 14.625c0 .484-.387.875-.864.875h-5.273c-.477 0-.863-.392-.863-.875s.387-.875.863-.875h5.272c.478 0 .865.391.865.875zm-6.191-4.375h2.466c.448 0 .809-.392.809-.875s-.361-.875-.81-.875h-2.465c-.447 0-.809.392-.809.875s.362.875.809.875zm14.691 1.75c0 6.627-5.373 12-12 12s-12-5.373-12-12 5.373-12 12-12 12 5.373 12 12zm-5-1.039c0-.383-.311-.692-.691-.692h-1.138c-.583 0-.69-.446-.69-.996-.001-2.36-1.91-4.273-4.265-4.273h-2.952c-2.355 0-4.264 1.913-4.264 4.272v5.455c0 2.36 1.909 4.273 4.264 4.273h5.474c2.353 0 4.262-1.913 4.262-4.272v-3.767z"/></svg>
       Home
    </a>

  <!--LinkedIn link sidebar-->
  <a id="linkedin-link"
       title="LinkedIn" aria-label="LinkedIn"
       href="https://www.linkedin.com/in/akashnair/" target="_blank">
       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 8c0 .557-.447 1.008-1 1.008s-1-.45-1-1.008c0-.557.447-1.008 1-1.008s1 .452 1 1.008zm0 2h-2v6h2v-6zm3 0h-2v6h2v-2.861c0-1.722 2.002-1.881 2.002 0v2.861h1.998v-3.359c0-3.284-3.128-3.164-4-1.548v-1.093z"/></svg>       
       LinkedIn
    </a>

  <!--Github link sidebar-->
  <a id="github-link"
       title="GitHub" aria-label="GitHub Profile"
       href="https://github.com/slashr" target="_blank">      
       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
       GitHub
    </a>

 <!-- Resume link sidebar-->
  <a id="Resume-link"
       title="Resume" aria-label="Resume"
       href="/assets/Akash-Nair-Resume.pdf">
       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M23.995 24h-1.995c0-3.104.119-3.55-1.761-3.986-2.877-.664-5.594-1.291-6.584-3.458-.361-.791-.601-2.095.31-3.814 2.042-3.857 2.554-7.165 1.403-9.076-1.341-2.229-5.413-2.241-6.766.034-1.154 1.937-.635 5.227 1.424 9.025.93 1.712.697 3.02.338 3.815-.982 2.178-3.675 2.799-6.525 3.456-1.964.454-1.839.87-1.839 4.004h-1.995l-.005-1.241c0-2.52.199-3.975 3.178-4.663 3.365-.777 6.688-1.473 5.09-4.418-4.733-8.729-1.35-13.678 3.732-13.678 4.983 0 8.451 4.766 3.732 13.678-1.551 2.928 1.65 3.624 5.09 4.418 2.979.688 3.178 2.143 3.178 4.663l-.005 1.241zm-13.478-6l.91 2h1.164l.92-2h-2.994zm2.995 6l-.704-3h-1.615l-.704 3h3.023z"/></svg>
       Resume
    </a>


 <!-- 


  
    
  

  
    
      <a class="page-link "
          href="/about.html">About</a>
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  


  


  
    
  

  
    
  

  
    
      <a class="category-link "
          href="/category/edge-case.html">Edge Case</a>
    
  

  
    
  

  

  
    
      <a class="category-link "
          href="/category/markup.html">Markup</a>
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  
-->

  <!-- Optional additional links to insert in sidebar nav -->
</nav>



 <!-- <nav id="sidebar-icon-links">
<!--
    <a id="github-link"
       class="icon" title="Github Project" aria-label="Github Project"
       href="https://github.com/slashr">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
    </a>
    <a id="github-download-link"
       class="icon" title="Download" aria-label="Download"
       href="https://github.com/slashr/archive/v.zip">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>
    </a>
  

  <a id="subscribe-link"
     class="icon" title="Subscribe" aria-label="Subscribe"
     href="/feed.xml">
    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg>
  </a>

  
  
  
  

  
    <a id="tags-link"
       class="icon"
       title="Tags" aria-label="Tags"
       href="/tags.html">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
    </a>
  

  
    <a id="search-link"
       class="icon"
       title="Search" aria-label="Search"
       href="/search.html">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>
    </a>
  

  <!-- Optional additional links to insert for icons links -->
</nav>

 <!-- <p>
 <!--font size="1"> &copy; 2018 All rights reserved.</font-->
  <!--<a href="/LICENSE.md">MIT License.</a>-->
</p>
 
</div>


    <main class="container">
      <header>
  <h1 class="post-title">Docker: Install, Build an Image and Publish to DockerHub</h1>
</header>
<div class="content">
  <div class="post-meta">
  <span class="post-date">20 Jul 2016</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        Automation
      
    
      &bull;

      
      
      

      
        Ops
      
    
  </span>
</div>


  <div class="post-body">
    <h4 id="about-docker">About Docker</h4>

<p>Docker is a <a href="https://en.wikipedia.org/wiki/Operating-system-level_virtualization">container technology</a> that provides a <strong>layer of abstraction</strong> on the OS that it is installed on(Linux or Windows). It allows the packaging of a software application into a <strong>image</strong> which consists of everything the software requires to run: code, system utilities, third party libraries and other dependencies. Then this image is run on the common <strong>layer of abstraction</strong> defined above. Therefore, it becomes easy to move and deploy the software application (which refers to the <strong>container</strong>) across any infrastructure or environment.</p>

<p><strong><em>Updated: August, 2018</em></strong>
<!--more--></p>
<hr />

<h4 id="pre-requisites">Pre-requisites:</h4>

<ul>
  <li>Ubuntu 16.04 LTS 64-bit version. (Docker does not run on 32 bit)</li>
  <li>Kernel version 3.10 and above. Check current kernel version using uname -r</li>
</ul>

<hr />

<h4 id="installation">Installation</h4>

<h5 id="the-easy-way">The Easy Way</h5>

<p><code>wget -qO- https://get.docker.com/ | sh</code></p>

<p>OR</p>

<h5 id="the-longer-way-in-case-the-easy-way-doesnt-work-out">The Longer Way (in case the easy way doesn’t work out)</h5>

<ol>
  <li>Update APT sources &amp; enable APT to work with HTTPS:
    <ul>
      <li>
        <p><code>apt-get update</code></p>
      </li>
      <li>
        <p><code>sudo apt-get install apt-transport-https ca-certificates curl software-properties-common</code></p>
      </li>
    </ul>
  </li>
  <li>Add the GPG keys:
    <ul>
      <li><code> curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - </code></li>
    </ul>
  </li>
  <li>Add the stable repository to the apt sources list:
    <ul>
      <li><code>sudo add-apt-repository \   
 "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
 $(lsb_release -cs) \
 stable"</code></li>
    </ul>
  </li>
  <li>Update apt resource list:
    <ul>
      <li><code>apt-get update</code></li>
    </ul>
  </li>
  <li>Install Docker Community Edition
    <ul>
      <li><code>apt-get install docker-ce</code></li>
    </ul>
  </li>
</ol>

<hr />

<h4 id="running-docker">Running Docker</h4>

<ol>
  <li>Start Docker and test if it installed correctly. The second command will download the “hello-world” image form DockerHub, create a container and run it.
    <ul>
      <li><code>service docker start</code></li>
      <li><code>docker run hello-world</code></li>
    </ul>
  </li>
  <li>To view all the containers on the system, type:
    <ul>
      <li><code>docker ps -a</code></li>
    </ul>
  </li>
  <li>Try downloading and running the whalesay image from DockerHub. In order to do this, first create an account on <a href="https://hub.docker.com/">DockerHub</a> and search for the image docker/whalesay. On the image page, you’ll find instructions on usage. For whalesay, use the following command
    <ul>
      <li><code>docker run docker/whalesay cowsay boo</code></li>
    </ul>
  </li>
  <li>After the image downloads and runs, you’ll see the input in the form of a ASCII whale with a “boo” caption. Not very profound, I know. You can play around with the image by passing different parameters. Say:
    <ul>
      <li><code>docker run docker/whalesay cowsay skywide!</code></li>
    </ul>
  </li>
  <li>In order to view all the images on the system, type:
    <ul>
      <li><code>docker images</code></li>
    </ul>
  </li>
  <li>We’ll next learn how to build your own images. For now, use the above whalesay image and modify it to create our new image</li>
</ol>

<hr />

<h4 id="creating-your-own-docker-image">Creating your own Docker image</h4>

<ol>
  <li>Create a directory skywide.</li>
  <li>CD into the directory</li>
  <li>Create a file Dockerfile
    <ul>
      <li><code>touch Dockerfile</code></li>
    </ul>
  </li>
  <li>Open Dockerfile in an editor and add the following.:
    <ul>
      <li><code>FROM: docker/whalesay:latest</code></li>
      <li><code>RUN: apt-get -y update &amp;&amp; apt-get install -y fortunes</code></li>
      <li><code>CMD: /usr/games/fortune -a | cowsay </code></li>
    </ul>
  </li>
  <li>The FROM command tells Docker which image your image is based on. RUN command tells Docker to install the required programs/libraries on your image. CMD tells Docker to run the specified command when the image is run inside a container.</li>
  <li>Next, build your image by running:
    <ul>
      <li><code>docker build -t docker-whale .</code></li>
    </ul>

    <p>The docker build command requires a Dockerfile to be present in the current directory. The “-t” option gives a name to the image being built (in this case, it is “docker-whale”)</p>
  </li>
  <li>Docker will build a new image by using the whalesay image that it downloaded earlier and on this new image it will update the apt-get cache and install the software fortunes.</li>
  <li>You can then verify that a new image has been built by running docker images. You should now see three images including “docker-whale”.</li>
  <li>Finally, see your own image in action! Go ahead and run:
    <ul>
      <li><code>docker run docker-whale</code></li>
    </ul>
  </li>
</ol>

<hr />

<h4 id="pushing-your-image-to-dockerhub">Pushing your image to DockerHub</h4>

<ol>
  <li>Create a new repository to upload your docker image to. Make sure the repository is public</li>
  <li>Note down the image ID from
    <ul>
      <li><code>docker images</code></li>
    </ul>
  </li>
  <li>Tag your image with your username
    <ul>
      <li><code>docker tag (image-id) (dockerhub-username) (repository-name):latest</code></li>
    </ul>
  </li>
  <li>Type docker images again to see your new tagged image</li>
  <li>You will need to login to Docker from the terminal before you can push it. To login
    <ul>
      <li><code>docker login --username=(username) --email=(docker-email)</code></li>
    </ul>
  </li>
  <li>To push the image to your repo, type
    <ul>
      <li><code>docker push (username)/(image-name)</code></li>
    </ul>
  </li>
  <li>Finally, after the command finishes running, go to your DockerHub repository page to find your uploaded image.</li>
</ol>


    



<div class="post-tags">
  
    
    <a href="/tags.html#automation">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">automation</span>
    </a>
  
    
    <a href="/tags.html#container">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">container</span>
    </a>
  
    
    <a href="/tags.html#devops">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">devops</span>
    </a>
  
    
    <a href="/tags.html#docker">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">docker</span>
    </a>
  
</div>
  </div>

  
  <section class="comments">
    <h2>Comments</h2>
    
  <div id="disqus_thread">
    <button class="disqus-load" onClick="loadDisqusComments()">
      Load Comments
    </button>
  </div>
  <script>

  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW
  *  TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT:s
  *  https://disqus.com/admin/universalcode/#configuration-variables
  */
  var disqus_config = function () {
    this.page.url = "http://localhost:4000/docker/";
    this.page.identifier = "http://skywide.in/blog/?p=597" ||
                           "http://localhost:4000/docker/";
  }
  function loadDisqusComments() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//Mektoplack99.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  }
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus</a>.
  </noscript>



  </section>

  <section class="related">
  <h2>Related Posts</h2>
  <ul class="posts-list">
    
      <li>
        <h3>
          <a href="/fire-suppression-using-smart-sensors-iot/">
            Suppressing Fires using Gas: An IoT Experiment
            <small>17 Mar 2018</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/using-lambda-turn-off-ec2-instances/">
            Using Lambda to Turn Off EC2 Instances During Off Hours
            <small>24 Nov 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/rds-read-replica-aurora-mysql/">
            RDS Read Replica for Aurora using MySQL
            <small>07 Sep 2016</small>
          </a>
        </h3>
      </li>
    
  </ul>
</section>

</div>

    </main>

    <!-- Optional footer content -->

  </body>
</html>
