<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <title>
    
      Akash Nair &middot; DevOps Engineer · Berlin
    
  </title>
 
   <!-- enable google analytics-->
   

   <!-- enable seo optimization-->
   <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Page 2 of 5 for Home | Akash Nair</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Home" />
<meta name="author" content="Akash Nair" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I am a DevOps Engineer and an automation extremist. I design, build and implement architectures on the cloud" />
<meta property="og:description" content="I am a DevOps Engineer and an automation extremist. I design, build and implement architectures on the cloud" />
<link rel="canonical" href="https://akashnair.com/page2/" />
<meta property="og:url" content="https://akashnair.com/page2/" />
<meta property="og:site_name" content="Akash Nair" />
<link rel="prev" href="https://akashnair.com/" />
<link rel="next" href="https://akashnair.com/page3" />
<script type="application/ld+json">
{"url":"https://akashnair.com/page2/","headline":"Home","author":{"@type":"Person","name":"Akash Nair"},"description":"I am a DevOps Engineer and an automation extremist. I design, build and implement architectures on the cloud","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />
  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.ico" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" />

  <!-- Additional head bits without overriding original head -->
</head>

  <body class="index">

    <div id="sidebar">
  <header>
    <h1 class="site-title">
      <a href="/">
        
          <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
        
        Akash Nair
      </a>
    </h1>
    <p class="lead">I am a DevOps Engineer and an automation extremist. I design, build and implement architectures on the cloud</p>
  </header>
  <nav id="sidebar-nav-links">
  
  

  

  <div id="profile-container">
     <center><image height=190 width=190 id="profileImage" src="/assets/images/avatar.png" /></center>
  </div>

  <!-- Icons downloaded from https://iconmonstr.com/ -->
  <!-- Home link sidebar-->
  <a id="home-link"
       title="Home" aria-label="Home"
       href="/">
       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.5 14.625c0 .484-.387.875-.864.875h-5.273c-.477 0-.863-.392-.863-.875s.387-.875.863-.875h5.272c.478 0 .865.391.865.875zm-6.191-4.375h2.466c.448 0 .809-.392.809-.875s-.361-.875-.81-.875h-2.465c-.447 0-.809.392-.809.875s.362.875.809.875zm14.691 1.75c0 6.627-5.373 12-12 12s-12-5.373-12-12 5.373-12 12-12 12 5.373 12 12zm-5-1.039c0-.383-.311-.692-.691-.692h-1.138c-.583 0-.69-.446-.69-.996-.001-2.36-1.91-4.273-4.265-4.273h-2.952c-2.355 0-4.264 1.913-4.264 4.272v5.455c0 2.36 1.909 4.273 4.264 4.273h5.474c2.353 0 4.262-1.913 4.262-4.272v-3.767z"/></svg>
       Home
    </a>

  <!--LinkedIn link sidebar-->
  <a id="linkedin-link"
       title="LinkedIn" aria-label="LinkedIn"
       href="https://www.linkedin.com/in/akashnair/" target="_blank">
       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 8c0 .557-.447 1.008-1 1.008s-1-.45-1-1.008c0-.557.447-1.008 1-1.008s1 .452 1 1.008zm0 2h-2v6h2v-6zm3 0h-2v6h2v-2.861c0-1.722 2.002-1.881 2.002 0v2.861h1.998v-3.359c0-3.284-3.128-3.164-4-1.548v-1.093z"/></svg>       
       LinkedIn
    </a>

  <!--Github link sidebar-->
  <a id="github-link"
       title="GitHub" aria-label="GitHub Profile"
       href="https://github.com/slashr" target="_blank">      
       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
       GitHub
    </a>

 <!-- Resume link sidebar-->
  <a id="Resume-link"
       title="Resume" aria-label="Resume"
       href="/assets/Akash-Nair-Resume.pdf">
       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M23.995 24h-1.995c0-3.104.119-3.55-1.761-3.986-2.877-.664-5.594-1.291-6.584-3.458-.361-.791-.601-2.095.31-3.814 2.042-3.857 2.554-7.165 1.403-9.076-1.341-2.229-5.413-2.241-6.766.034-1.154 1.937-.635 5.227 1.424 9.025.93 1.712.697 3.02.338 3.815-.982 2.178-3.675 2.799-6.525 3.456-1.964.454-1.839.87-1.839 4.004h-1.995l-.005-1.241c0-2.52.199-3.975 3.178-4.663 3.365-.777 6.688-1.473 5.09-4.418-4.733-8.729-1.35-13.678 3.732-13.678 4.983 0 8.451 4.766 3.732 13.678-1.551 2.928 1.65 3.624 5.09 4.418 2.979.688 3.178 2.143 3.178 4.663l-.005 1.241zm-13.478-6l.91 2h1.164l.92-2h-2.994zm2.995 6l-.704-3h-1.615l-.704 3h3.023z"/></svg>
       Resume
    </a>


 <!-- 


  

  
    
      <a class="page-link "
          href="/about.html">About</a>
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  

  
    
  

  

  
    
  


  


  

  
    
  

  
    
      <a class="category-link "
          href="/category/edge-case.html">Edge Case</a>
    
  

  
    
  

  

  
    
      <a class="category-link "
          href="/category/markup.html">Markup</a>
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  

  
    
  

  

  
    
  
-->

  <!-- Optional additional links to insert in sidebar nav -->
</nav>



 <!-- <nav id="sidebar-icon-links">
<!--
    <a id="github-link"
       class="icon" title="Github Project" aria-label="Github Project"
       href="https://github.com/slashr">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
    </a>
    <a id="github-download-link"
       class="icon" title="Download" aria-label="Download"
       href="https://github.com/slashr/archive/v.zip">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>
    </a>
  

  <a id="subscribe-link"
     class="icon" title="Subscribe" aria-label="Subscribe"
     href="/feed.xml">
    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg>
  </a>

  
  
  
  

  
    <a id="tags-link"
       class="icon"
       title="Tags" aria-label="Tags"
       href="/tags.html">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
    </a>
  

  
    <a id="search-link"
       class="icon"
       title="Search" aria-label="Search"
       href="/search.html">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>
    </a>
  

  <!-- Optional additional links to insert for icons links -->
</nav>

 <!-- <p>
 <!--font size="1"> &copy; 2019 All rights reserved.</font-->
  <!--<a href="/LICENSE.md">MIT License.</a>-->
</p>
 
</div>


    <main class="container">
      <div class="content">
  
<div class="pagination">
  <a class="pagination-item newer"
     href="/">
    Newer
  </a>
</div>



  

  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/ansible-playbook-tomcat-cluster/">
        Ansible Playbook to Create a Load-Balanced Tomcat Cluster
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">13 Jul 2016</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        Automation
      
    
      &bull;

      
      
      

      
        AWS
      
    
  </span>
</div>


    
      <p>This Ansible playbook should give an idea about the configuration management capabilities of Ansible. It sets up a group of Tomcat nodes which are load-balanced by Apache using the Mod-jk module. In addition to this, it also sets up all other dependencies and also configures the installed services to run on startup.</p>


    

    
      
      
      

      
        <a href="/ansible-playbook-tomcat-cluster/"></a>
      
    
  </article>
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/iam-restrict-ec2-access-specific-region/">
        IAM: Restrict EC2 Access to Specific Region
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">06 Jul 2016</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        AWS
      
    
      &bull;

      
      
      

      
        Custom IAM Policies
      
    
  </span>
</div>


    
      <p>Restrict user activity to a specific region in order to minimize resource wastage. This policy will ensure that all of the resources are being created only in the region of your choice so that when it comes down to resource cleanup and housekeeping, you’ll be able to save quite a lot of time.</p>

<p>Apart from restricting access region-wise, it allows users read-only access to resources launched in other regions.</p>

<script src="https://gist.github.com/slashr/f17eb97ac86e94160ce03cc920373143.js"></script>


    

    
      
      
      

      
    
  </article>
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/elb-logs-using-elk/">
        Analyzing ELB Logs using Elasticsearch and Logstash
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">16 Jun 2016</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        AWS
      
    
      &bull;

      
      
      

      
        Logging
      
    
  </span>
</div>


    
      <p>Elasticsearch, Logstash and Kibana (ELK) is a stack widely used for log analytics. The AWS Elasticsearch service lets you run the Elasticsearch and Kibana right out of the box with some manual setup of Logstash required. In this setup, we’ll walk through setting up the ELK stack on AWS, enabling ELB logs and analyzing the logs to identify and visualize trends like traffic spikes, frequently vistitor IPs etc.</p>

<hr />

<h4 id="setting-up-elasticsearch">Setting Up Elasticsearch</h4>

<ol>
  <li>Choose a domain name that would be part of the ElasticSearch endpoint. For example, <em>mysite</em>.</li>
  <li>Select the number of instances in the cluster. Ideally select atleast 2 nodes so that the sharding works. Leave the rest of the options as it is and click <strong>Next</strong>.</li>
  <li>Under <strong>Set up access policy,</strong> select <strong>Allow open access to the domain. </strong>This will allow anyone to access your endpoint. Since we are only testing this, you can go ahead with this option. However, a production environment would require more restrictive access policies. Click <strong>Next</strong> and then <strong>Confirm and Create. </strong></li>
  <li>The domain will take around 5 to 10 minutes to get created.</li>
  <li>Meanwhile, enable Access Logs on ELB by following <a href="https://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/enable-access-logs.html">this guide</a>.</li>
</ol>

<hr />

<h4 id="setting-up-logstash">Setting Up Logstash</h4>

<ol>
  <li>
    <p>Update and upgrade your system packages: 
 <code class="highlighter-rouge">sudo apt-get update &amp;&amp; sudo apt-get upgrade</code></p>
  </li>
  <li>
    <p>Logstash requires Java on the machine. Install Java: 
 <code class="highlighter-rouge">sudo apt-get install default-jdk</code></p>
  </li>
  <li>
    <p>Add Logstash Package Repositories to your sources list. Verify that you’re getting the latest repository info on <a href="https://www.elastic.co/guide/en/logstash/current/installing-logstash.html#package-repositories">this page</a></p>

    <p>Run: <code class="highlighter-rouge">echo "deb https://packages.elastic.co/logstash/2.3/debian stable main" | sudo tee -a /etc/apt/sources.list</code></p>
  </li>
  <li>
    <p>Finally, update your packages again and install Logstash:
 <code class="highlighter-rouge">sudo apt-get update &amp;&amp; sudo apt-get install logstash</code></p>
  </li>
  <li>
    <p>Add your AWS IAM Access Key and Secret Key by using environment variables: 
 <code class="highlighter-rouge">echo AWS_ACCESS_KEY_ID=AKIAACCESSKEY</code></p>

    <p><code class="highlighter-rouge">echo AWS_SECRET_ACCESS_KEY=tUx2SECRETKEYACk32</code></p>
  </li>
  <li>
    <p>Create a Logstash configuration file and enter the Elasticsearch endpoint and S3 bucket name in it. Store this file as <code class="highlighter-rouge">/etc/logstash/conf.d/logstash.conf</code></p>
  </li>
  <li>
    <p>Run Logstash:
 <code class="highlighter-rouge">/opt/logstash/bin/logstash -f /etc/logstash/conf.d/logstash.conf&lt;/code&gt;</code></p>
    <hr />
  </li>
</ol>

<h4 id="setting-up-kibana">Setting Up Kibana</h4>

<ol>
  <li>Open Kibana from the URL provided on the Elasticsearch console.
    <ul>
      <li>Use the index pattern <em>elb_logs</em></li>
      <li>Use the timestamp <em>@timestamp</em></li>
    </ul>
  </li>
  <li>To get started with visualizing your data, read through the <a href="https://www.elastic.co/guide/en/kibana/current/visualize.html">Visualize section</a> of Elastic’s official documentation.</li>
</ol>

    

    
      
      
      

      
    
  </article>
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/configuration-management-ec2-ansible/">
        Configuration Management on EC2 Using Ansible
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">05 May 2016</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        Automation
      
    
      &bull;

      
      
      

      
        AWS
      
    
      &bull;

      
      
      

      
        Ops
      
    
  </span>
</div>


    
      <h4 id="introduction">Introduction</h4>

<p>Ansible is one of the easiest Configuration Management tools to get started with due to its client-less architecture. Ansible is written in Python and uses YAML for is configuration files which is a simple and human-readable syntax. One of the most important features of Ansible is its idempotency which means changes are only made when required and ignored otherwise. This prevents the possibility of inconsistency in your infrastructure.</p>

<hr />

<h4 id="installation">Installation</h4>

<ol>
  <li>The easiest and recommended way of installing is from the package repositories. Simply run: &lt;ul style="list-style-type: disc;"&gt;
    <li>
   <code>sudo apt-get install ansible</code>
 </li>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/ul&gt;
</code></pre></div>    </div>
  </li>
  <li>To test the installation, run the following. If you get a prompt asking for the SSH password, it indicates that the installation was successful. &lt;ul style="list-style-type: disc;"&gt;
    <li>
   <code>ansible all -m ping --ask-pass</code>
 </li>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/ul&gt;
</code></pre></div>    </div>
  </li>
  <li>Open the file /etc/ansible/hosts and add the IPs of your servers in it. For example, you can add EC2 instance public IP or you can add the private IP if your control machine is the same VPC as the servers. The control machine as the name indicates is the machine which will be sending the commands to your servers.</li>
  <li>To test if the control machine is able to reach the servers, run the <code class="highlighter-rouge">ping</code> command. Key-based authentication is encouraged over passwords. use the <code class="highlighter-rouge">--private-key</code> flag to specify the path to your keyfile. If successful, it will return a JSON response containing the string “success”. &lt;ul style="list-style-type: disc;"&gt;
    <li>
   <code>ansible all -m ping --private-key ~/path/to/key -u ubuntu</code>
 </li>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/ul&gt;
</code></pre></div>    </div>
  </li>
  <li>To log in as root, add the become flag (-b) &lt;ul style="list-style-type: disc;"&gt;
    <li>
   <code>ansible all -m ping --private-key ~/path/to/key -u ubuntu -b</code>
 </li>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/ul&gt;
</code></pre></div>    </div>
  </li>
  <li>Test the configuration further by running a live command on the nodes &lt;ul style="list-style-type: disc;"&gt;
    <li>
   <code>ansible all -a "/bin/echo skywide" --private-key ~/path/to/key -u ubuntu</code>
 </li>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/ul&gt;
</code></pre></div>    </div>
  </li>
  <li>If you’d like to have a fully automated and unattended setup, it would be wise to disable the host key checking feature. This feature when enabled will prompt for confirmation of the key the first time Ansible tries to log into the server. Disabling host key checking however has some implications and you might want to fully understand them before disabling the host check. Inside <code class="highlighter-rouge">/etc/ansible/ansible.cfg</code>, edit the following &lt;ul style="list-style-type: disc;"&gt;
    <li>
   <code>host_key_checking = False</code>
 </li>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/ul&gt;
</code></pre></div>    </div>
  </li>
  <li>This way, you are able to successfully run commands on your nodes. However, Ansible goes far beyond running simple commands on your nodes. To make the most of it, we need to make use of playbooks.</li>
</ol>

<hr />

<h4 id="components">Components</h4>

<ol>
  <li>Inventory &lt;ul style="list-style-type: square;"&gt;
    <li>
   The inventory file is nothing but a file containing the list of servers you want to configure. This file by default exists at /etc/ansible/hosts. It is also possible to use multiple inventory files.
 </li>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/ul&gt;
</code></pre></div>    </div>
  </li>
  <li>Dynamic Inventory &lt;ul style="list-style-type: square;"&gt;
    <li>
   A Dynamic Inventory is when the inventory files are stored in a different system. For example, the files can be stored on a cloud storage provider, LDAP or other such storage solutions.
 </li>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/ul&gt;
</code></pre></div>    </div>
  </li>
  <li>Patterns &lt;ul style="list-style-type: square;"&gt;
    <li>
   The hosts that are specified in an inventory file can be grouped into categories like &#8220;web servers&#8221; and &#8220;db servers&#8221; by using the appropriate syntax. A Pattern refers to a set of groups (which are a set of hosts). Take for example, <code>ansible all -m ping. </code>Here &#8220;all&#8221; refers to all hosts. Whereas in <code>ansible webservers -m ping, </code>the command will only work on the hosts in the group &#8220;webservers&#8221; as defined in the inventory file.
 </li>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/ul&gt;
</code></pre></div>    </div>
  </li>
  <li>Variables &lt;ul style="list-style-type: square;"&gt;
    <li>
   Variables, as the name suggests, are values that are used when you are working on systems that require varied configuration. Variables can be something like a port number or a private IP address. Variables can be defined either in Inventory files or Playbooks.
 </li>
    <li>
   Example <pre><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">webservers</span>
  <span class="l l-Scalar l-Scalar-Plain">vars</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">http_port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span></pre>
        
   <p>
     Here http_port is a variable.&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; 
          
     <li>
       Ad-Hoc Commands <ul style="list-style-type: square;">
         <li>
           Ad-Hoc Commands are used to perform quick tasks that you don&#8217;t want to write an entire playbook for. Take the analogy of running a command through shell (ad-hoc command) and running it through a bash script (playbook). <code>ansible all -m ping</code> is an example of a ad-hoc command.
         </li>
       </ul>
     </li>
          
     <li>
       Playbooks <ul style="list-style-type: square;">
         <ul style="list-style-type: square;">
           <li>
             A playbook is a file containing instructions. The following playbook will install Apache web server on your nodes.
           </li>
         </ul>
       </ul>
            
       <p>
         &lt;/li&gt; 
              
         <li>
           To run the playbook, use the following command <ul style="list-style-type: square;">
             <li>
               <code>ansible-playbook skywide.yaml --private-key ~/path/to/key.pem</code>
             </li>
             <li>
               If you want to avoid specifying the path to the key file every time, modify the file /etc/ansible/ansible.cfg and set the path in the variable <code>private_key_file</code>
             </li>
           </ul>
         </li>&lt;/ol&gt; 
              
         <hr />
              
         <p>
           &nbsp;
         </p>
</p></li></p></li>
  </li>
</ol>

    

    
      
      
      

      
    
  </article>
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/cloudformation-launch-ec2-execute-script-startup/">
        CloudFormation Template to Launch an EC2 instance
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">29 Apr 2016</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        Automation
      
    
      &bull;

      
      
      

      
        AWS
      
    
      &bull;

      
      
      

      
        Ops
      
    
  </span>
</div>


    
      <p>The following is a bare-minimum CloudFormation template to launch an EC2 instance. It’s bare-minimum in the sense that only the Parameters and Resources which are absolutely necessary are part of the template.</p>

<p>This template can also execute a bash script provided as <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html#user-data-shell-scripts">User Data</a> to the EC2 instance. The User Data can be a set of directives that will be executed only once during the first boot cycle of the instance. This feature can be used when you need to say launch several instances with the Apache web server installed on them. To do this you would simply supply the command <code class="highlighter-rouge">apt-get install apache2</code> as user-data. There is no need to add sudo keyword to the command as the script will be run with root privileges.</p>

<p>In the above template, the custom script updates the list of packages (apt-get update) and installs Apache (apt-get install apache2). You can add/remove commands as required. Be sure to put them inside double quotes and each command should be on a new line.</p>

    

    
      
      
      

      
    
  </article>
  

  
<div class="pagination">
  <a class="pagination-item older"
     href="/page3">
    Older
  </a>
</div>


</div>

    </main>

    <!-- Optional footer content -->

  </body>
</html>
